networks:
  authelia:
    driver: macvlan
    driver_opts:
      parent: enp9s0.9
    ipam:
      config:
      - gateway: 192.168.9.1
        subnet: 192.168.9.0/24
      driver: default
  cache:
    driver: macvlan
    driver_opts:
      parent: enp9s0.16
    ipam:
      config:
      - gateway: 192.168.16.1
        subnet: 192.168.16.0/24
      driver: default
  dns:
    driver: macvlan
    driver_opts:
      parent: enp9s0.6
    ipam:
      config:
      - gateway: 192.168.6.1
        subnet: 192.168.6.0/24
      driver: default
  download:
    driver: macvlan
    driver_opts:
      parent: enp9s0.4
    ipam:
      config:
      - gateway: 192.168.4.1
        subnet: 192.168.4.0/24
      driver: default
  guest:
    driver: macvlan
    driver_opts:
      parent: enp9s0.2
    ipam:
      config:
      - gateway: 192.168.2.1
        subnet: 192.168.2.0/24
      driver: default
  home_assistant:
    driver: macvlan
    driver_opts:
      parent: enp9s0.12
    ipam:
      config:
      - gateway: 192.168.12.1
        subnet: 192.168.12.0/24
      driver: default
  iot:
    driver: macvlan
    driver_opts:
      parent: enp9s0.3
    ipam:
      config:
      - gateway: 192.168.3.1
        subnet: 192.168.3.0/24
      driver: default
  management:
    driver: macvlan
    driver_opts:
      parent: enp9s0.15
    ipam:
      config:
      - gateway: 192.168.15.1
        subnet: 192.168.15.0/24
      driver: default
  minecraft:
    driver: macvlan
    driver_opts:
      parent: enp9s0.11
    ipam:
      config:
      - gateway: 192.168.11.1
        subnet: 192.168.11.0/24
      driver: default
  nextcloud:
    driver: macvlan
    driver_opts:
      parent: enp9s0.10
    ipam:
      config:
      - gateway: 192.168.10.1
        subnet: 192.168.10.0/24
      driver: default
  reverse_proxy:
    driver: macvlan
    driver_opts:
      parent: enp9s0.5
    ipam:
      config:
      - gateway: 192.168.5.1
        subnet: 192.168.5.0/24
      driver: default
  vuln:
    driver: macvlan
    driver_opts:
      parent: enp9s0.14
    ipam:
      config:
      - gateway: 192.168.14.1
        subnet: 192.168.14.0/24
      driver: default
  wlan:
    driver: macvlan
    driver_opts:
      parent: enp9s0.8
    ipam:
      config:
      - gateway: 192.168.8.1
        subnet: 192.168.8.0/24
      driver: default
  work:
    driver: macvlan
    driver_opts:
      parent: enp9s0.7
    ipam:
      config:
      - gateway: 192.168.7.1
        subnet: 192.168.7.0/24
      driver: default
  yt_download:
    driver: macvlan
    driver_opts:
      parent: enp9s0.13
    ipam:
      config:
      - gateway: 192.168.13.1
        subnet: 192.168.13.0/24
      driver: default
services:
  amd:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: amd
    deploy:
      resources:
        limits:
          cpus: 3.0
          memory: 1024M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      ARL_TOKEN: ''
      AUTOSTART: "true"
      BITRATE: '320'
      Concurrency: '3'
      DOWNLOADMODE: wanted
      EMBEDDED_COVER_QUALITY: '80'
      FALLBACKSEARCH: "True"
      FORCECONVERT: "false"
      FORMAT: MP3
      FilePermissions: '666'
      FolderPermissions: '766'
      HOME: /root
      LIST: both
      LidarrAPIkey: ''
      LidarrUrl: https://lidarr.rovacsek.com
      MBRAINZMIRROR: https://musicbrainz.org
      MBRATELIMIT: '1'
      MatchDistance: '10'
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      POSTPROCESSTHREADS: '8'
      SCRIPTINTERVAL: 6h
      SearchType: both
      TERM: xterm
      TITLESHORT: AMD
      VERSION: 1.1.5
      XDG_CONFIG_HOME: /config/deemix/xdg
      replaygain: "true"
      requirequality: "false"
    hostname: amd
    image: randomninjaatk/amd:latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.142
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/amd:/config:rw
    - /mnt/zfs/downloads:/downloads-amd:rw
    working_dir: /config
  authelia:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    command:
    - --config /config/configuration.yml
    container_name: authelia
    depends_on:
      authelia-mysql:
        condition: service_started
      authelia-redis:
        condition: service_started
    deploy:
      resources:
        limits:
          cpus: 2.0
          memory: 4096M
    dns:
    - 192.168.6.2
    - 192.168.9.1
    entrypoint:
    - /usr/local/bin/entrypoint.sh
    environment:
      PATH: /app:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10006'
      PUID: '991'
    hostname: authelia
    image: authelia/authelia:latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      authelia:
        ipv4_address: 192.168.9.2
    ports:
    - protocol: tcp
      published: 9091
      target: 9091
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/authelia:/config:rw
    working_dir: /app
  authelia-mysql:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    command:
    - mysqld
    container_name: authelia-mysql
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.9.1
    entrypoint:
    - docker-entrypoint.sh
    environment:
      GOSU_VERSION: '1.12'
      MYSQL_DATABASE: ''
      MYSQL_MAJOR: '8.0'
      MYSQL_PASSWORD: ''
      MYSQL_ROOT_PASSWORD: ''
      MYSQL_USER: ''
      MYSQL_VERSION: 8.0.26-1debian10
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
    hostname: mysql
    image: mysql:latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      authelia:
        ipv4_address: 192.168.9.4
    ports:
    - protocol: tcp
      published: 3306
      target: 3306
    - protocol: tcp
      published: 33060
      target: 33060
    restart: unless-stopped
    volumes:
    - /mnt/zfs/databases/authelia:/var/lib/mysql:rw
  authelia-redis:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    command:
    - redis-server
    container_name: authelia-redis
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 1024M
    dns:
    - 192.168.6.2
    - 192.168.9.1
    entrypoint:
    - docker-entrypoint.sh
    environment:
      GOSU_VERSION: '1.12'
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      REDIS_DOWNLOAD_SHA: 4b9a75709a1b74b3785e20a6c158cab94cf52298aa381eea947a678a60d551ae
      REDIS_DOWNLOAD_URL: http://download.redis.io/releases/redis-6.2.5.tar.gz
      REDIS_VERSION: 6.2.5
    hostname: redis
    image: redis:latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      authelia:
        ipv4_address: 192.168.9.3
    ports:
    - protocol: tcp
      published: 6379
      target: 6379
    restart: unless-stopped
    working_dir: /data
  deluge:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: deluge
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10005'
      PUID: '984'
      PYTHON_EGG_CACHE: /config/plugins/.python-eggs
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
    hostname: deluge
    image: ghcr.io/linuxserver/deluge:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.130
    ports:
    - protocol: tcp
      published: 6881
      target: 6881
    - protocol: udp
      published: 6881
      target: 6881
    - protocol: tcp
      published: 8112
      target: 8112
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/deluge:/config:rw
    - /mnt/zfs/downloads:/downloads:rw
  home-assistant:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: home-assistant
    deploy:
      resources:
        limits:
          cpus: 2.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.12.1
    entrypoint:
    - /init
    environment:
      LANG: C.UTF-8
      PATH: /usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      S6_BEHAVIOUR_IF_STAGE2_FAILS: '2'
      S6_CMD_WAIT_FOR_SERVICES: '1'
      S6_SERVICES_GRACETIME: '220000'
      WHEELS_LINKS: https://wheels.home-assistant.io/alpine-3.13/amd64/
    hostname: homeassistant
    image: homeassistant/home-assistant:latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      home_assistant:
        ipv4_address: 192.168.12.2
    ports:
    - protocol: tcp
      published: 8123
      target: 8123
    restart: unless-stopped
    volumes:
    - /mnt/zfs/home_assistant:/config:rw
    working_dir: /config
  jackett:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: jackett
    deploy:
      resources:
        limits:
          cpus: 2.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10009'
      PUID: '980'
      TERM: xterm
      UMASK: '022'
      XDG_CONFIG_HOME: /config
      XDG_DATA_HOME: /config
    hostname: jackett
    image: ghcr.io/linuxserver/jackett:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.129
    ports:
    - protocol: tcp
      published: 9117
      target: 9117
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/jackett:/config:rw
    - /mnt/zfs/containers/jackett/blackhole:/downloads:rw
  jellyfin:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: jellyfin
    deploy:
      resources:
        limits:
          cpus: 8.0
          memory: 12288M
    dns:
    - 192.168.6.2
    - 192.168.5.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      NVIDIA_DRIVER_CAPABILITIES: all
      NVIDIA_VISIBLE_DEVICES: all
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10002'
      PUID: '998'
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
    hostname: jellyfin
    image: ghcr.io/linuxserver/jellyfin:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      reverse_proxy:
        ipv4_address: 192.168.5.4
    ports:
    - protocol: tcp
      published: 8096
      target: 8096
    restart: unless-stopped
    runtime: nvidia
    volumes:
    - /mnt/zfs/containers/jellyfin:/config:rw
    - /mnt/zfs/movies:/movies:rw
    - /mnt/zfs/music:/music:rw
    - /mnt/zfs/tv:/tv:rw
  lidarr:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: lidarr
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10002'
      PUID: '990'
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
      XDG_CONFIG_HOME: /config/xdg
    extra_hosts:
    - deluge:192.168.4.130
    hostname: lidarr
    image: ghcr.io/linuxserver/lidarr:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.133
    ports:
    - protocol: tcp
      published: 8443
      target: 8443
    - protocol: tcp
      published: 8686
      target: 8686
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/lidarr:/config:rw
    - /mnt/zfs/containers/swag/etc/letsencrypt/live/rovacsek.com:/config/rovacsek.com:rw
    - /mnt/zfs/downloads:/downloads:rw
    - /mnt/zfs/downloads:/downloads-amd:rw
    - /mnt/zfs/music:/music:rw
  nextcloud:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: nextcloud
    depends_on:
      nextcloud-mariadb:
        condition: service_started
    deploy:
      resources:
        limits:
          cpus: 4.0
          memory: 4096M
    dns:
    - 192.168.6.2
    - 192.168.10.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LD_PRELOAD: /usr/lib/preloadable_libiconv.so
      NEXTCLOUD_PATH: /config/www/nextcloud
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10003'
      PUID: '988'
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
    hostname: nextcloud
    image: ghcr.io/linuxserver/nextcloud:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      nextcloud:
        ipv4_address: 192.168.10.3
    ports:
    - protocol: tcp
      published: 443
      target: 443
    - protocol: tcp
      published: 80
      target: 80
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/nextcloud:/config:rw
    - /mnt/zfs/nextcloud:/data:rw
  nextcloud-mariadb:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: nextcloud-mariadb
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 1024M
    dns:
    - 192.168.6.2
    - 192.168.10.1
    entrypoint:
    - /init
    environment:
      DATADIR: /config/databases
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      MYSQL_DIR: /config
      MYSQL_ROOT_PASSWORD: ''
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10012'
      PUID: '982'
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
    hostname: mariadb
    image: ghcr.io/linuxserver/mariadb:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      nextcloud:
        ipv4_address: 192.168.10.3
    ports:
    - protocol: tcp
      published: 3306
      target: 3306
    restart: unless-stopped
    volumes:
    - /mnt/zfs/databases/nextcloud:/config:rw
  ombi:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: ombi
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      HOME: /config
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '100'
      PUID: '1000'
      TERM: xterm
      UMASK: '022'
    hostname: ombi
    image: ghcr.io/linuxserver/ombi:amd64-development
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.134
    ports:
    - protocol: tcp
      published: 3579
      target: 3579
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/ombi:/config:rw
  pihole:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: pihole
    deploy:
      resources:
        limits:
          cpus: 2.0
          memory: 2048M
    dns:
    - 1.1.1.1
    - 8.8.8.8
    entrypoint:
    - /s6-init
    environment:
      DNS1: 127.1.1.1#5153
      DNS2: 127.2.2.2#5253
      DNSMASQ_LISTENING: all
      DNSMASQ_USER: root
      FTL_CMD: no-daemon
      INTERFACE: enp9s0
      IPv6: "false"
      PATH: /opt/pihole:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PHP_ENV_CONFIG: /etc/lighttpd/conf-enabled/15-fastcgi-php.conf
      PHP_ERROR_LOG: /var/log/lighttpd/error.log
      PIHOLE_ARCH: amd64
      PIHOLE_INSTALL: /etc/.pihole/automated install/basic-install.sh
      S6OVERLAY_RELEASE: https://github.com/just-containers/s6-overlay/releases/download/v2.1.0.2/s6-overlay-amd64.tar.gz
      S6_BEHAVIOUR_IF_STAGE2_FAILS: '2'
      S6_KEEP_ENV: '1'
      S6_LOGGING: '0'
      ServerIP: 192.168.6.2
      TZ: Australia/NSW
      VERSION: v5.3.1
      WEBPASSWORD: ''
    hostname: pihole
    image: testdasi/pihole-dot-doh:latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      dns:
        ipv4_address: 192.168.6.2
    ports:
    - protocol: tcp
      published: 443
      target: 443
    - protocol: tcp
      published: 53
      target: 53
    - protocol: udp
      published: 53
      target: 53
    - protocol: udp
      published: 67
      target: 67
    - protocol: tcp
      published: 80
      target: 80
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/pihole/pihole:/etc/pihole:rw
    - /mnt/zfs/containers/pihole/dnsmasq.d:/etc/dnsmasq.d:rw
    - /mnt/zfs/containers/pihole/config:/config:rw
  portainer:
    container_name: portainer
    deploy:
      resources:
        limits:
          cpus: 4.0
          memory: 4096M
    entrypoint:
    - /portainer
    environment:
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
    hostname: portainer
    image: portainer/portainer-ce
    ipc: private
    logging:
      driver: journald
      options: {}
    mac_address: 02:42:ac:11:00:02
    networks:
      bridge:
        ipv4_address: 172.17.0.2
    ports:
    - protocol: tcp
      published: 9000
      target: 9000
    privileged: true
    restart: always
    security_opt:
    - label=disable
    volumes:
    - /var/run/docker.sock:/var/run/docker.sock:rw
    - /mnt/zfs/containers/portainer:/data:rw
    working_dir: /
  radarr:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: radarr
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10002'
      PUID: '986'
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
      XDG_CONFIG_HOME: /config/xdg
    extra_hosts:
    - deluge:192.168.4.130
    hostname: radarr
    image: ghcr.io/linuxserver/radarr:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.132
    ports:
    - protocol: tcp
      published: 7878
      target: 7878
    - protocol: tcp
      published: 8443
      target: 8443
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/radarr:/config:rw
    - /mnt/zfs/containers/swag/etc/letsencrypt/live/rovacsek.com:/config/rovacsek.com:rw
    - /mnt/zfs/downloads:/downloads:rw
    - /mnt/zfs/movies:/movies:rw
  sonarr:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: sonarr
    deploy:
      resources:
        limits:
          cpus: 1.0
          memory: 2048M
    dns:
    - 192.168.6.2
    - 192.168.4.1
    entrypoint:
    - /init
    environment:
      HOME: /root
      LANG: en_US.UTF-8
      LANGUAGE: en_US.UTF-8
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10002'
      PUID: '985'
      SONARR_BRANCH: main
      TERM: xterm
      TZ: Australia/NSW
      UMASK: '022'
      XDG_CONFIG_HOME: /config/xdg
    extra_hosts:
    - deluge:192.168.4.130
    hostname: sonarr
    image: ghcr.io/linuxserver/sonarr:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      download:
        ipv4_address: 192.168.4.131
    ports:
    - protocol: tcp
      published: 8989
      target: 8989
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/sonarr:/config:rw
    - /mnt/zfs/downloads:/downloads:rw
    - /mnt/zfs/tv:/tv:rw
  swag:
    cap_add:
    - AUDIT_WRITE
    - CHOWN
    - DAC_OVERRIDE
    - FOWNER
    - FSETID
    - KILL
    - MKNOD
    - NET_BIND_SERVICE
    - NET_RAW
    - SETFCAP
    - SETGID
    - SETPCAP
    - SETUID
    - SYS_CHROOT
    cap_drop:
    - AUDIT_CONTROL
    - BLOCK_SUSPEND
    - DAC_READ_SEARCH
    - IPC_LOCK
    - IPC_OWNER
    - LEASE
    - LINUX_IMMUTABLE
    - MAC_ADMIN
    - MAC_OVERRIDE
    - NET_ADMIN
    - NET_BROADCAST
    - SYSLOG
    - SYS_ADMIN
    - SYS_BOOT
    - SYS_MODULE
    - SYS_NICE
    - SYS_PACCT
    - SYS_PTRACE
    - SYS_RAWIO
    - SYS_RESOURCE
    - SYS_TIME
    - SYS_TTY_CONFIG
    - WAKE_ALARM
    container_name: swag
    deploy:
      resources:
        limits:
          cpus: 4.0
          memory: 4096M
    dns:
    - 192.168.6.2
    - 192.168.5.1
    entrypoint:
    - /init
    environment:
      AWS_CONFIG_FILE: /config/dns-conf/route53.ini
      DHLEVEL: '4096'
      EMAIL: letsencrypt@rovacsek.com
      HOME: /root
      ONLY_SUBDOMAINS: "false"
      PATH: /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
      PGID: '10015'
      PUID: '976'
      S6_BEHAVIOUR_IF_STAGE2_FAILS: '2'
      STAGING: "false"
      SUBDOMAINS: minecraft,server,pfsense,nextcloud,authelia,jellyfin,ombi,radarr,sonarr,lidarr,jackett,duplicati,pihole,portainer,homeassistant
      TERM: xterm
      UMASK: '002'
      URL: rovacsek.com
      VALIDATION: http
    hostname: swag
    image: ghcr.io/linuxserver/swag:amd64-latest
    ipc: private
    logging:
      driver: journald
      options: {}
    networks:
      reverse_proxy:
        ipv4_address: 192.168.5.3
    ports:
    - protocol: tcp
      published: 443
      target: 443
    - protocol: tcp
      published: 80
      target: 80
    restart: unless-stopped
    volumes:
    - /mnt/zfs/containers/swag:/config:rw
version: '3'

